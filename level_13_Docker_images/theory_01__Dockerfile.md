# üê≥ Dockerfile ‚Äî –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

## üìã –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ Dockerfile

| –ö–æ–º–∞–Ω–¥–∞      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                 |
|--------------|---------------------------------------------|
| [`FROM`](#from)         | –£–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑                        |
| [`RUN`](#run)           | –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏              |
| [`CMD`](#cmd)           | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é             |
| [`LABEL`](#label)       | –î–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫ –æ–±—Ä–∞–∑—É                  |
| [`MAINTAINER`](#maintainer-—É—Å—Ç–∞—Ä–µ–≤—à–∞—è) | –£–∫–∞–∑—ã–≤–∞–µ—Ç –∞–≤—Ç–æ—Ä–∞ –æ–±—Ä–∞–∑–∞ (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è)     |
| [`EXPOSE`](#expose)     | –£–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å—Å—è   |
| [`ENV`](#env)           | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è            |
| [`ADD`](#add)           | –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏–≤—ã         |
| [`COPY`](#copy)         | –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –∏ –∫–∞—Ç–∞–ª–æ–≥–∏                     |
| [`ENTRYPOINT`](#entrypoint) | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∫–æ–º–∞–Ω–¥—É            |
| [`VOLUME`](#volume)     | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–º–∞            |
| [`USER`](#user)         | –£–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                        |
| [`WORKDIR`](#workdir)   | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é              |
| [`ARG`](#arg)           | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏                    |
| [`ONBUILD`](#onbuild)   | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö Dockerfile            |
| [`SHELL`](#shell)       | –£–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–æ–ª–æ—á–∫—É –¥–ª—è RUN                    |
| [`HEALTHCHECK`](#healthcheck) | –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∑–¥–æ—Ä–æ–≤—å—è         |
| [`STOPSIGNAL`](#stopsignal) | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–∏–≥–Ω–∞–ª –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏     |
| [`COPY --from`](#–º—É–ª—å—Ç–∏—Å—Ç–µ–π–¥–∂-—Å–±–æ—Ä–∫–∞-copy---from) | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –º—É–ª—å—Ç–∏—Å—Ç–µ–π–¥–∂-—Å–±–æ—Ä–∫–µ |

---

## üß± –ö–æ–º–∞–Ω–¥—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Dockerfile

### `FROM`
–£–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑:
```
FROM ubuntu:22.04


# –ú–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å –ø—Å–µ–≤–¥–æ–Ω–∏–º–æ–º –¥–ª—è –º—É–ª—å—Ç–∏—Å—Ç–µ–π–¥–∂-—Å–±–æ—Ä–∫–∏:
FROM golang:1.20 AS builder
```

### `RUN`
–í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏:
```
RUN apt-get update && apt-get install -y curl
```

### `CMD`
–ö–æ–º–∞–Ω–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```
CMD ["python", "app.py"]
```

### `LABEL`
–î–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∫ –æ–±—Ä–∞–∑—É:

–ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≤–∏–¥–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≤—Ç–æ—Ä–∞, –æ–ø–∏—Å–∞–Ω–∏–µ, –≤–µ—Ä—Å–∏—é).  
–ß—Ç–æ –∫—Ä–∞–π–Ω–µ —É–¥–æ–±–Ω–æ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤.
```
LABEL maintainer="you@example.com" version="1.0" description="–≠—Ç–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Flask"
```

### `MAINTAINER`
–£—Å—Ç–∞—Ä–µ–≤—à–∞—è –∫–æ–º–∞–Ω–¥–∞. –ë—ã–ª–∞ –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `LABEL`:
```
MAINTAINER John Doe <john@example.com>
```

### `EXPOSE`
‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å—Å—è

–ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç, –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã.   
–ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç —Å–∞–º –ø–æ —Å–µ–±–µ ‚Äî —ç—Ç–æ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è.

```
EXPOSE 5000
```
–í–ê–ñ–ù–û: –ø–æ—Ä—Ç –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```
docker run -p 5000:5000 ...
```

### `ENV`
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```
ENV APP_ENV=production
```
–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
```
docker run -e FLASK_ENV=development ...
```

### `ADD`
–ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã, —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏–≤—ã. 
–ü–æ—Ö–æ–∂–∞ –Ω–∞ COPY, –Ω–æ —É–º–µ–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å .tar-–∞—Ä—Ö–∏–≤—ã –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ URL.
```
ADD app.tar.gz /app/
```
–í–ê–ñ–ù–û: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –î–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ `COPY` (–æ–Ω –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–µ–µ).

### `COPY`
–ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã/–ø–∞–ø–∫–∏ –±–µ–∑ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏.
–ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏ –≤ –æ–±—Ä–∞–∑. –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–∞—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ `ADD`.
```
COPY ./src /app/
```

### `ENTRYPOINT`
(—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞) - –ó–∞–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

`ENTRYPOINT` –∑–∞–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∏ `docker run`.

–ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –∫–∞–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª, –∑–∞–ø—É—Å–∫–∞—é—â–∏–π —ç—Ç—É –∫–æ–º–∞–Ω–¥—É.

#### –§–æ—Ä–º–∞—Ç—ã –∑–∞–ø–∏—Å–∏

–ï—Å—Ç—å –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∑–∞–ø–∏—Å–∞—Ç—å `ENTRYPOINT`:
- exec-—Ñ–æ—Ä–º–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)	
  - `ENTRYPOINT ["python", "app.py"]`	
  - –ö–æ–º–∞–Ω–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å–ø–∏—Å–æ–∫, –∫–∞–∂–¥—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π. 
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±–æ–ª–æ—á–∫–∏ (sh).
  
- shell-—Ñ–æ—Ä–º–∞	
  - `ENTRYPOINT python app.py`	
  - –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø–∏—Å–∞–Ω–∞ –∫–∞–∫ –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞. 
  - –û–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±–æ–ª–æ—á–∫—É (`/bin/sh -c`), –∫–∞–∫ –µ—Å–ª–∏ –±—ã v –º—ã –Ω–∞–ø–∏—Å–∞–ª–∏ —ç—Ç–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

**–ü–æ—á–µ–º—É –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å exec-—Ñ–æ—Ä–º—É?**
- –û–Ω–∞ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –ª–∏—à–Ω–∏–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±–æ–ª–æ—á–∫–∏.
- –ë–æ–ª–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (`SIGTERM`, `SIGINT`), –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–∞—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

#### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π `ENTRYPOINT`
```
FROM python:3.12

WORKDIR /app

COPY app.py .

ENTRYPOINT ["python", "app.py"]
```
–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç?
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç `python app.py`.

#### –ü—Ä–∏–º–µ—Ä 2: `ENTRYPOINT + CMD` (–∫–æ–º–±–∏–Ω–∞—Ü–∏—è)
```
FROM ubuntu

ENTRYPOINT ["ping"]

CMD ["google.com"]
```

–ß—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?
- `ENTRYPOINT` –∑–∞–¥–∞–µ—Ç –±–∞–∑–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É `ping`.
- `CMD` –∑–∞–¥–∞—ë—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `google.com`.

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?
- –î–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `docker run myimage`
  - ‚Üí –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ `ping google.com`.
- –ï—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —É–∫–∞–∑–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã: `docker run myimage github.com`
  - ‚Üí –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ `ping github.com`.

–¢–æ –µ—Å—Ç—å `CMD` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ –∑–∞–ø—É—Å–∫–∞, –∞ `ENTRYPOINT` ‚Äî –Ω–µ—Ç.

#### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ `docker run` ‚Äî –≤—Å–µ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ `CMD` –∏–ª–∏ –ø—Ä—è–º–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- –ù—É–∂–Ω–æ –±—ã—Ç—å –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–º, –µ—Å–ª–∏ `ENTRYPOINT` —É–∫–∞–∑–∞–Ω –≤ shell-—Ñ–æ—Ä–º–µ ‚Äî –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

**–ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –∑–∞–¥–∞—Ç—å –∏ `ENTRYPOINT`, –∏ `CMD`?**
- `ENTRYPOINT` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞.
- `CMD` –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫ `ENTRYPOINT`.

–ï—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, —á—Ç–æ–±—ã `CMD` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–ª–æ –≤—Å—ë –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ENTRYPOINT` –≤ shell-—Ñ–æ—Ä–º–µ (–Ω–æ —ç—Ç–æ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ).

#### –ò—Ç–∞–∫, –µ—Å–ª–∏ –∑–∞–¥–∞—Ç—å:
- –¢–æ–ª—å–∫–æ `ENTRYPOINT`:
  - –í—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–º–∞–Ω–¥—É.
- –¢–æ–ª—å–∫–æ `CMD`:
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å.
- –ò —Ç–æ, –∏ –¥—Ä—É–≥–æ–µ:`ENTRYPOINT + CMD`, —Ç–æ	
  - `ENTRYPOINT` ‚Äî –∫–æ–º–∞–Ω–¥–∞, 
  - `CMD` ‚Äî –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

### `VOLUME` ‚Äî  –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–º–∞

–û–±—ä—è–≤–ª—è–µ—Ç —Ç–æ—á–∫—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–º–∞:
```
VOLUME ["/data"]
```
–°–æ–∑–¥–∞—ë—Ç —Ç–æ—á–∫—É, –≤ –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –≤–Ω–µ—à–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ (—Ç–æ–º—ã).   
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å `/data` –≤ Docker-—Ç–æ–º–µ –∏–ª–∏ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–æ–º–∞ —Ö–æ—Å—Ç–∞.

### `USER`

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `USER` –∑–∞–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –≥—Ä—É–ø–ø—É), –æ—Ç –∏–º–µ–Ω–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ `Dockerfile`, –∞ —Ç–∞–∫–∂–µ –∫–æ–º–∞–Ω–¥–∞, –≤—ã–ø–æ–ª–Ω—è–µ–º–∞—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`ENTRYPOINT`, `CMD` –∏ —Ç.–¥.).
```
USER <–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>
USER <–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>:<–≥—Ä—É–ø–ø–∞>
```

–ï—Å–ª–∏ –≤—ã –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å `USER`, —Ç–æ Docker –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å—ë –æ—Ç –∏–º–µ–Ω–∏ `root`, —á—Ç–æ:
- —É–¥–æ–±–Ω–æ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `apt-get install`),
- –Ω–æ –ö–†–ê–ô–ù–ï –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
  - —É –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –±—É–¥–µ—Ç –ø–æ–ª–Ω—ã–π root-–¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, 
  - –∞ –ø—Ä–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö –≤–æ–∑–º–æ–∂–µ–Ω –≤—ã—Ö–æ–¥ –∑–∞ –µ–≥–æ –ø—Ä–µ–¥–µ–ª—ã.

### `WORKDIR`

`WORKDIR` –∑–∞–¥–∞—ë—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã `RUN`, `CMD`, `ENTRYPOINT`, `COPY`, `ADD` –∏ —Ç.–¥.

–ï—Å–ª–∏ –æ–Ω–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, Docker –µ—ë —Å–æ–∑–¥–∞—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∫–∞–∫ –∫–æ—Ä–Ω–µ–≤–∞—è `/`
```
WORKDIR /usr/src/app
```

#### –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `WORKDIR`

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ `WORKDIR` –ø–æ–¥—Ä—è–¥, –ø—É—Ç—å –±—É–¥–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å—Å—è:
```
WORKDIR /app
WORKDIR src
WORKDIR components
```
–≠—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: `/app/src/components`

### `ARG`

`ARG` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫–∏, —Ç–æ –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ (`docker build`), –∞ –Ω–µ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–û–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ **—Ç–æ–ª—å–∫–æ** –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∏ **–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞** –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

```
ARG VERSION
RUN echo $VERSION
```
#### üîÑ `ARG` vs `ENV` ‚Äî –≤ —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞?

| **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**                            | **ARG** | **ENV** |
|-------------------------------------------|:-------:|:-------:|
| –î–æ—Å—Ç—É–ø–Ω–∞ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏                  | ‚úÖ      | ‚úÖ      |
| –î–æ—Å—Ç—É–ø–Ω–∞ –≤ –∑–∞–ø—É—â–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ          | ‚ùå      | ‚úÖ      |
| –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ `--build-arg`  | ‚úÖ      | –ß–∞—Å—Ç–∏—á–Ω–æ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ `ENV VAR=$ARG_VAR`) |
| –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –æ–±—Ä–∞–∑–µ                      | ‚ùå      | ‚úÖ      |

#### –ß–∞—Å—Ç–æ `ARG` –∏ ENV `–∏—Å–ø–æ–ª—å–∑—É—é—Ç` –≤–º–µ—Å—Ç–µ:
```
ARG VERSION=1.0.0
ENV VERSION=$VERSION
```
–¢–µ–ø–µ—Ä—å `VERSION` –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –∏ –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

#### –í–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å!:
`ARG` –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–æ–ª–µ–π, —Ç–æ–∫–µ–Ω–æ–≤), –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –ó–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ (`--build-arg`),
- –û–Ω–∏ –º–æ–≥—É—Ç –ø–æ–ø–∞—Å—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é Docker (`docker history`) –∏–ª–∏ –∫–µ—à.

### `ONBUILD`

`ONBUILD` –∑–∞–¥–∞—ë—Ç "–æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é" –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Ç–µ–∫—É—â–µ–≥–æ –æ–±—Ä–∞–∑–∞, –Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –∫–æ–≥–¥–∞ –¥—Ä—É–≥–æ–π `Dockerfile` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –æ–±—Ä–∞–∑ –∫–∞–∫ –±–∞–∑–æ–≤—ã–π —Å –ø–æ–º–æ—â—å—é `FROM`.

üìå –ö–æ–≥–¥–∞ —ç—Ç–æ –Ω—É–∂–Ω–æ?
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `ONBUILD` –ø–æ–ª–µ–∑–Ω–∞, –µ—Å–ª–∏ –≤—ã —Å–æ–∑–¥–∞—ë—Ç–µ –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑, –¥–ª—è –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

üß™ –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:
–ë–∞–∑–æ–≤—ã–π Dockerfile (–æ–±—Ä–∞–∑-—à–∞–±–ª–æ–Ω):
```
# base-image.Dockerfile
FROM node:20

# –î–æ–±–∞–≤–∏–º –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
ONBUILD COPY . /app
ONBUILD WORKDIR /app
ONBUILD RUN npm install
```
–°–æ–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–∑:
```
docker build -f base-image.Dockerfile -t mynodebase .
```
–¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç mynodebase –∫–∞–∫ –±–∞–∑—É:
```
# Dockerfile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
FROM mynodebase

CMD ["node", "index.js"]
```
–í–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ —ç—Ç–æ–≥–æ –≤—Ç–æ—Ä–æ–≥–æ –æ–±—Ä–∞–∑–∞, Docker –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–∏—Ç –≤ –Ω–µ–≥–æ:
```
COPY . /app
WORKDIR /app
RUN npm install
```

### üß© –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ `ONBUILD`

| **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å** | **–ü–æ–≤–µ–¥–µ–Ω–∏–µ** |
|-----------------|---------------|
| –ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç? | –¢–æ–ª—å–∫–æ –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö Dockerfile, –≥–¥–µ `FROM` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ–±—Ä–∞–∑ —Å `ONBUILD` |
| –ü—Ä–∏ —Å–±–æ—Ä–∫–µ —Å–∞–º–æ–≥–æ –æ–±—Ä–∞–∑–∞ ‚Äî `ONBUILD` –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è | ‚úÖ |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ `ONBUILD` –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | ‚úÖ |
| –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –ª—é–±–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π | `RUN`, `COPY`, `ADD`, `ENV`, `WORKDIR` –∏ –¥—Ä. |


### `SHELL`

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `SHELL` –≤ `Dockerfile` –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å –æ–±–æ–ª–æ—á–∫—É (`shell`), –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥, —Ç–∞–∫–∏—Ö –∫–∞–∫ RUN. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/bin/sh -c –¥–ª—è` –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –æ–±—Ä–∞–∑–æ–≤ (–Ω–∞ –æ—Å–Ω–æ–≤–µ Linux).
```
SHELL ["/bin/bash", "-c"]
```

### `HEALTHCHECK`

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `HEALTHCHECK` –≤ Dockerfile –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. 
–≠—Ç–æ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —Ç–µ—Å—Ç–æ–≤, –ø–æ—Å–ª–µ –Ω–µ–ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è.

```
HEALTHCHECK [--interval=<time>] [--timeout=<time>] [--start-period=<time>] [--retries=<count>] CMD <command>
```
- `CMD <command>` ‚Äî –∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- `--interval=<time>` ‚Äî –≤—Ä–µ–º—è –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫—É–Ω–¥).
- `--timeout=<time> `‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30 —Å–µ–∫—É–Ω–¥).
- `--start-period=<time>` ‚Äî –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0 —Å–µ–∫—É–Ω–¥).
- `--retries=<count>` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥–µ—Ç –ø—Ä–∏–∑–Ω–∞–Ω –Ω–µ–∑–¥–æ—Ä–æ–≤—ã–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3).

üìå –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HEALTHCHECK:
```
FROM nginx:latest

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 80
HEALTHCHECK --interval=5s --timeout=3s --retries=3 CMD curl --fail http://localhost:80 || exit 1
```
–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:
- `CMD` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É curl –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–∞ 80 –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
- `--interval=5s` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—É–¥–µ—Ç –ø—Ä–æ–≤–æ–¥–∏—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥.
- `--timeout=3s` ‚Äî Docker –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –Ω–µ –±–æ–ª–µ–µ 3 —Å–µ–∫—É–Ω–¥ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∫–æ–º–∞–Ω–¥—ã.
- `--retries=3` ‚Äî –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –±—É–¥–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å 3 —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥, –æ–Ω –±—É–¥–µ—Ç –ø—Ä–∏–∑–Ω–∞–Ω –Ω–µ–∑–¥–æ—Ä–æ–≤—ã–º.

**–ó–¥–æ—Ä–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** ‚Äî –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞, —É–∫–∞–∑–∞–Ω–Ω–∞—è –≤ HEALTHCHECK, –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –∫–æ–¥–æ–º 0, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è –∑–¥–æ—Ä–æ–≤—ã–º.

**–ù–µ–∑–¥–æ—Ä–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** ‚Äî –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –∫–æ–¥–æ–º –æ—Ç–ª–∏—á–Ω—ã–º –æ—Ç 0, Docker –±—É–¥–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ–∑–¥–æ—Ä–æ–≤—ã–º. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É, –µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω --restart policy.

–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–Ω–µ–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω –∫–æ–º–∞–Ω–¥–æ–π `docker run --restart=on-failure my_container`, —Ç–æ –µ—Å—Ç—å —Å —Ñ–ª–∞–≥–æ–º `--restart=on-failure`, –∏ –æ–∫–∞–∑–∞–ª—Å—è "–Ω–µ–∑–¥–æ—Ä–æ–≤—ã–º", –æ–Ω –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω.


### `STOPSIGNAL`
–°–∏–≥–Ω–∞–ª –≤ `STOPSIGNAL` –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.   
–ö–∞–∂–¥—ã–π —Å–∏–≥–Ω–∞–ª —Å–æ–æ–±—â–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—É, –∫–∞–∫ –Ω—É–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É:

- `SIGTERM` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –¥–∞—ë—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —à–∞–Ω—Å –∑–∞–≤–µ—Ä—à–∏—Ç—å —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –∞–∫–∫—É—Ä–∞—Ç–Ω–æ: –∑–∞–∫—Ä—ã—Ç—å —Ñ–∞–π–ª—ã, –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã.
- `SIGINT` –ø–æ—Ö–æ–∂ –Ω–∞ Ctrl+C –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è –ø—Ä–æ–≥—Ä–∞–º–º–µ –æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–∏.
- `SIGKILL` –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ—á–∏—Å—Ç–∫—É.

–ò—Å–ø–æ–ª—å–∑—É—è `STOPSIGNAL`, –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è —Ç–∞–∫, –∫–∞–∫ –Ω—É–∂–Ω–æ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. 

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ `SIGTERM`, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Å–∏–≥–Ω–∞–ª, —á—Ç–æ–±—ã –µ–≥–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å.
```
STOPSIGNAL SIGTERM
```

