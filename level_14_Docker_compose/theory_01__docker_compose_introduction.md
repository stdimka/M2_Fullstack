# ‚ùì –ß—Ç–æ —Ç–∞–∫–æ–µ docker compose?

`Docker Compose` ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –∑–∞–ø—É—Å–∫–∞—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–µ—Ä–≤–µ—Ä, –∫–ª–∏–µ–Ω—Ç, –ë–î),
- —É–ø—Ä–∞–≤–ª—è—Ç—å –∏–º–∏ –∫–∞–∫ –æ–¥–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π,
- –æ–ø–∏—Å—ã–≤–∞—Ç—å –≤—Å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚Äî –≤ YAML-—Ñ–∞–π–ª–µ.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `Dockerfile` –∏ —á—Ç–æ `docker-compose.yml`?

### üì¶ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Dockerfile?

`Dockerfile` ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞. 

–û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ö–ê–ö —Å–æ–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: –∫–∞–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫–æ–π –±—É–¥–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏ —Ç.–¥.

üîç –ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:
- –ë–µ—Ä—ë—Ç –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ Python.
- –ö–æ–ø–∏—Ä—É–µ—Ç –≤ –Ω–µ–≥–æ –≤–∞—à –∫–æ–¥.
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- –ó–∞–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

üìå –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ–±—Ä–∞–∑ ‚Äî –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.


## üß© –ß—Ç–æ –¥–µ–ª–∞–µ—Ç docker-compose.yml?

`docker-compose.yml` ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –≤–∫–ª—é—á–∞—è –∏—Ö —Å–≤—è–∑—å –º–µ–∂–¥—É —Å–æ–±–æ–π, —Ç–æ–º–∞, —Å–µ—Ç–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç.–¥.

–û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ö–ê–ö –ó–ê–ü–£–°–¢–ò–¢–¨ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–≤—Å—é —Å–∏—Å—Ç–µ–º—É), –≤–∫–ª—é—á–∞—è:
- –∫–∞–∫–æ–π –æ–±—Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–∏–ª–∏ –≥–¥–µ —Å–æ–±—Ä–∞—Ç—å)
- –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å
- –∫–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—Ç—å
- –∫–∞–∫ —Å–≤—è–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–± + –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)

üîç –ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:

- –°—Ç—Ä–æ–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–∑ Dockerfile (–¥–ª—è web)
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –°–≤—è–∑—ã–≤–∞–µ—Ç –∏—Ö –≤ –æ–¥–Ω—É —Å–µ—Ç—å
- –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç—ã

üìå –†–µ–∑—É–ª—å—Ç–∞—Ç: –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ü–µ–ª–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
üß†### üìã –ö—Ä–∞—Ç–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ: `Dockerfile` vs `docker-compose.yml`

|               | `Dockerfile`                          | `docker-compose.yml`                             |
|---------------|----------------------------------------|---------------------------------------------------|
| üì¶ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞                         | –ó–∞–ø—É—Å–∫ –≥—Ä—É–ø–ø—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤                         |
| ‚öôÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ   | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ                  | –ö–∞–∫ —Å–≤—è–∑–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã                |
| üìÅ –§–æ—Ä–º–∞—Ç     | –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª (`Dockerfile`)         | YAML-—Ñ–∞–π–ª (`docker-compose.yml`)                  |
| üß± –ò—Å–ø–æ–ª—å–∑—É–µ—Ç | `docker build`, `docker run`          | `docker compose up`                               |
| üîó –°–≤—è–∑—å      | –û–ø–∏—Å—ã–≤–∞–µ—Ç –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä              | –£–ø—Ä–∞–≤–ª—è–µ—Ç –º–Ω–æ–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏                       |



## üßæ –ß—Ç–æ –∑–∞ —Ñ–∞–π–ª YAML –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?

–≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî —Å–µ—Ä–¥—Ü–µ Docker Compose.
- –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: docker-compose.yml 
- –≠—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã:
  - –∫–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) –Ω—É–∂–Ω—ã;
  - –∏–∑ —á–µ–≥–æ –æ–Ω–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è (build);
  - –∫–∞–∫ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π (depends_on);
  - –∫–∞–∫–∏–µ –ø–æ—Ä—Ç—ã –Ω—É–∂–Ω–æ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å (ports);
  - –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ (volumes, networks, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç.–¥.).

–û–Ω –∑–∞–º–µ–Ω—è–µ—Ç —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –≤—Å—ë —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑—É–µ—Ç.
## üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ –ø—Ä–∏–º–µ—Ä?
```
version: "3.9"

services:
    api:
        build: ./api
        container_name: api-container
        ports:
            - "5000:5000"

    client:
        build: ./client
        container_name: client-container
        depends_on:
            - api
```
üìå –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
- `version: "3.9"`:–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Ä—Å–∏—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Docker Compose,
- `services`:	–û–ø–∏—Å—ã–≤–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã
- `api`:	–ü–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å, —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏–∑ –ø–∞–ø–∫–∏ `./api`
- `build`:	–°–±–æ—Ä–∫–∞ –∏–∑ Dockerfile –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ
- `container_name`:	–ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äî —É–¥–æ–±–Ω–æ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- `ports`:	–ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–∞ (—Ö–æ—Å—Ç:–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä), –∑–¥–µ—Å—å 5000
- `client`:	–í—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–∏—Å, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
- `depends_on`:	–ó–∞–ø—É—Å–∫ client –ø–æ—Å–ª–µ api

## ‚ùå –ú–æ–∂–µ—Ç –ª–∏ Docker Compose —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ YAML-—Ñ–∞–π–ª–∞?

–ù–µ—Ç, –ø–æ —Å—É—Ç–∏ –Ω–µ –º–æ–∂–µ—Ç.

Docker Compose –≤—Å–µ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω YAML-—Ñ–∞–π–ª, –æ–Ω –∏—â–µ—Ç —Ñ–∞–π–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `docker-compose.yml` –∏–ª–∏ `docker-compose.yaml` –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

üß© –ù–æ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª —Ñ–ª–∞–≥–æ–º -f:

docker compose -f myproject.yml up

## –†–µ–∑—é–º–µ: 
YAML-—Ñ–∞–π–ª –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –Ω–æ –º–æ–∂–µ—Ç –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É.  
–í–∞–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –µ–≥–æ, –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π.

## –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –æ–±—Ä–∞–∑—ã –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `docker-compose.yml`, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:

```
docker-compose up --build
```
