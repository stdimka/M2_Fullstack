# üìö –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –∏–µ—Ä–∞—Ä—Ö–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ Docker Swarm

## –ò–µ—Ä–∞—Ä—Ö–∏—è –∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å –æ–±—ä–µ–∫—Ç–æ–≤ –≤ Docker Swarm

| –û–±—ä–µ–∫—Ç | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ | –í–∑–∞–∏–º–æ—Å–≤—è–∑—å |
|:-------|:------------|:------------|
| **–ö–ª–∞—Å—Ç–µ—Ä (Swarm)** | –ì—Ä—É–ø–ø–∞ –º–∞—à–∏–Ω, –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏. | –ö–ª–∞—Å—Ç–µ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —É–∑–ª–æ–≤. |
| **–£–∑–µ–ª (Node)** | –û–¥–Ω–∞ –º–∞—à–∏–Ω–∞ (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è), —É—á–∞—Å—Ç–≤—É—é—â–∞—è –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ. –ú–æ–∂–µ—Ç –±—ã—Ç—å **Manager** –∏–ª–∏ **Worker**. | –£–∑–ª—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–¥–∞—á–∏, –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. |
| **–°—Ç–µ–∫ (Stack)** | –õ–æ–≥–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞ —Å–µ—Ä–≤–∏—Å–æ–≤, —Å–µ—Ç–µ–π –∏ —Ç–æ–º–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –≤–º–µ—Å—Ç–µ —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. | –°—Ç–µ–∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–µ, –∏—Å–ø–æ–ª—å–∑—É—è —É–∑–ª—ã. |
| **–°–µ—Ä–≤–∏—Å (Service)** | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–æ–±—Ä–∞–∑, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫, –ø–æ—Ä—Ç—ã, –ª–∏–º–∏—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –ø—Ä.). | –°–µ—Ä–≤–∏—Å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Å—Ç–µ–∫–∞–º –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —É–∑–ª–∞—Ö. |
| **–ó–∞–¥–∞—á–∞ (Task)** | –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Swarm: "–ó–∞–ø—É—Å—Ç–∏ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞–∫–æ–≥–æ-—Ç–æ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ —Ç–∞–∫–æ–º-—Ç–æ —É–∑–ª–µ". | –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ = –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. |
| **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (Container)** | –ë–µ–≥—É—â–∏–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞–¥–∞—á–∏. | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–∞ —É–∑–ª–µ –ø–æ –∑–∞–¥–∞—á–µ —Å–µ—Ä–≤–∏—Å–∞. |



## üß© –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Å–≤—è–∑–∏

```
–ö–ª–∞—Å—Ç–µ—Ä (Swarm)
 ‚îî‚îÄ‚îÄ –£–∑–ª—ã (Nodes)
      ‚îî‚îÄ‚îÄ –°—Ç–µ–∫ (Stack)
           ‚îî‚îÄ‚îÄ –°–µ—Ä–≤–∏—Å—ã (Services)
                ‚îî‚îÄ‚îÄ –ó–∞–¥–∞—á–∏ (Tasks)
                     ‚îî‚îÄ‚îÄ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Containers)
```
–ò–ª–∏ –ø–æ —Å–º—ã—Å–ª—É:
```
–ö–ª–∞—Å—Ç–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç —É–∑–ª–∞–º–∏ ‚Üí —É–∑–ª—ã –∑–∞–ø—É—Å–∫–∞—é—Ç —Å–µ—Ä–≤–∏—Å—ã ‚Üí —Å–µ—Ä–≤–∏—Å—ã —Å–æ–∑–¥–∞—é—Ç –∑–∞–¥–∞—á–∏ ‚Üí –∑–∞–¥–∞—á–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
```
## ‚úçÔ∏è –ö—Ä–∞—Ç–∫–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–ª—è –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- **–ö–ª–∞—Å—Ç–µ—Ä (Swarm)** ‚Äî –≤—Å—ë –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –º–∞—à–∏–Ω.
- **–£–∑–µ–ª (Node)** ‚Äî –æ–¥–Ω–∞ –º–∞—à–∏–Ω–∞ –≤ —ç—Ç–æ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏.
- **–°—Ç–µ–∫ (Stack)** ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Å–æ—Å—Ç–æ—è—â–µ–µ –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤.
- **–°–µ—Ä–≤–∏—Å (Service)** ‚Äî –∑–∞–¥–∞–Ω–∏–µ, —Å–∫–æ–ª—å–∫–æ –∏ –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
- **–ó–∞–¥–∞—á–∞ (Task)** ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω: –∑–∞–ø—É—Å—Ç–∏—Ç—å (–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å –∏ —Ç.–¥.) –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (Container)** ‚Äî –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üî• –ú–∏–Ω–∏-–ø—Ä–∏–º–µ—Ä –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã:
```
docker stack deploy -c docker-compose.yml mystack
```
–ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

- –ö–ª–∞—Å—Ç–µ—Ä —É–∂–µ –µ—Å—Ç—å (docker swarm init).
- –ù–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä ‚Äî —ç—Ç–æ –æ–¥–∏–Ω —É–∑–µ–ª.
- –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —Å—Ç–µ–∫ `mystack`.
- –í —Å—Ç–µ–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–∏—Å–∞–Ω –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å `web` —Å 3 —Ä–µ–ø–ª–∏–∫–∞–º–∏ (–ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä).
- `Swarm` —Å–æ–∑–¥–∞—ë—Ç 3 –∑–∞–¥–∞—á–∏.
- –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –Ω–∞—à–µ–º —É–∑–ª–µ.

–î–∞–ª–µ–µ, —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥:
```
docker service ls
docker service ps mystack_web
docker ps
```
–º–æ–∂–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –≤—Å—ë —Ç–æ, —á—Ç–æ –≤–∏–¥–µ–ª–∏ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ.