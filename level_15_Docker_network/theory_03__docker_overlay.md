# üê≥ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ –¥—Ä–∞–π–≤–µ—Ä–∞ Docker **Overlay**

## Overlay (–ù–∞–ª–æ–∂–µ–Ω–Ω–∞—è —Å–µ—Ç—å)

**Overlay —Å–µ—Ç–∏** - —ç—Ç–æ –º–∞–≥–∏—Å—Ç—Ä–∞–ª—å, —Å–æ–µ–¥–∏–Ω—è—é—â–∞—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–∞—Ö.   
–û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –µ–¥–∏–Ω–æ–µ —Å–µ—Ç–µ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è –≤—Å–µ–≥–æ
–∫–ª–∞—Å—Ç–µ—Ä–∞ Docker, –æ–±—ä–µ–¥–∏–Ω—è—è —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã –≤ –µ–¥–∏–Ω—É—é —Å–∏—Å—Ç–µ–º—É.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
- **Overlay-—Å–µ—Ç—å** –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º, –∑–∞–ø—É—â–µ–Ω–Ω—ã–º **–Ω–∞ —Ä–∞–∑–Ω—ã—Ö Docker-—Ö–æ—Å—Ç–∞—Ö**, –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—â–∞—Ç—å—Å—è –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –∫–∞–∫ –±—É–¥—Ç–æ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏.
- –†–∞–±–æ—Ç–∞–µ—Ç **–ø–æ–≤–µ—Ä—Ö —Å–µ—Ç–µ–π —Ö–æ—Å—Ç–æ–≤**: Docker —Å–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å–µ—Ç—å, –∫–æ—Ç–æ—Ä–∞—è "–Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è" –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–µ—Ç–∏.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –≤ **Docker Swarm** (–∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ö–æ—Å—Ç–∞–º–∏).

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –¢—Ä–µ–±—É–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ **Swarm** (`docker swarm init`).
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —à–∏—Ñ—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:
  - –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–≤—è–∑–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.
  - –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ –æ–¥–Ω–æ–º –∏ —Ç–æ–º –∂–µ —Ö–æ—Å—Ç–µ –≤ overlay-—Å–µ—Ç–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ –Ω–µ –≥–æ–Ω—è—é—Ç —Ç—Ä–∞—Ñ–∏–∫ —á–µ—Ä–µ–∑ —Å–µ—Ç—å.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- Docker-–¥–µ–º–æ–Ω—ã –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ —á–µ—Ä–µ–∑ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ VXLAN-–ø–∞–∫–µ—Ç—ã.
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏ –ø–æ –Ω—É–∂–Ω—ã–º –ø–æ—Ä—Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2377, 7946, 4789).

**–ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥:**

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä Swarm:

```
docker swarm init
```

–°–æ–∑–¥–∞—Ç—å Overlay-—Å–µ—Ç—å:

```
docker network create --driver overlay my_overlay_network
```

–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫ overlay-—Å–µ—Ç–∏:

```
docker service create --name my_service --network my_overlay_network nginx
```

–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ overlay-—Å–µ—Ç–∏ (—Å experimental-—Ñ—É–Ω–∫—Ü–∏–µ–π –≤ Docker Standalone):

```
docker network create --driver overlay --attachable attachable_overlay
```

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∫ `attachable` overlay-—Å–µ—Ç–∏:

```
docker run -d --name my_container --network attachable_overlay nginx
```

> **attachable** –æ–ø—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å **–æ–±—ã—á–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** (–Ω–µ —Å–µ—Ä–≤–∏—Å—ã) –∫ overlay-—Å–µ—Ç–∏.

**–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ç–µ–π:**

```
docker network ls
```

–ò–Ω—Å–ø–µ–∫—Ü–∏—è overlay-—Å–µ—Ç–∏:

```
docker network inspect my_overlay_network
```

---

# üìÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Overlay —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏

| –í–∏–¥ —Å–µ—Ç–∏ | –û–ø–∏—Å–∞–Ω–∏–µ | –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ | –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ |
|:---------|:---------|:------------|:--------------|
| **bridge** | –ú–æ—Å—Ç–æ–≤–∞—è —Å–µ—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏ —Ö–æ—Å—Ç–æ–º | - –ò–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏<br>- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç NAT<br>- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ | `docker network create --driver bridge my_bridge_network`<br>`docker run -d --network my_bridge_network nginx` |
| **host** | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞ | - –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ IP<br>- –ü–æ—Ä—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å—Ä–∞–∑—É –Ω–∞ —Ö–æ—Å—Ç–µ<br>- –ú–µ–Ω—å—à–∞—è –∏–∑–æ–ª—è—Ü–∏—è | `docker run -d --network host nginx` |
| **none** | –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ç–∏ | - –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è<br>- –ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–¥–æ—Å—Ç—É–ø–∞<br>- –ú–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ø–æ–∑–∂–µ | `docker run -d --network none nginx`<br>`docker network connect bridge isolated_container` |
| **overlay** | –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å–µ—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ö–æ—Å—Ç–∞—Ö | - –¢—Ä–µ–±—É–µ—Ç—Å—è Docker Swarm<br>- –í–æ–∑–º–æ–∂–Ω–∞ —à–∏—Ñ—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞<br>- –°–≤—è–∑—å –º–µ–∂–¥—É —Ö–æ—Å—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å–µ—Ç—å | `docker swarm init`<br>`docker network create --driver overlay my_overlay_network`<br>`docker service create --name my_service --network my_overlay_network nginx` |


---

# üõ† –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è **–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö overlay-—Å–µ—Ç–µ–π** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≥—Ä—É–ø–ø —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –æ–¥–Ω–æ–º Docker Swarm –∫–ª–∞—Å—Ç–µ—Ä–µ

<p align="center">
  <img src="docker_overlay_example.png" alt="Docker —Å—Ö–µ–º–∞" width="600"/>
</p>


üìö –ü–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±–µ —Å–µ—Ä–≤–∏—Å —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞–ø–∞:
- –ï—Å—Ç—å Nginx –∏–ª–∏ API Gateway –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî –æ–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã (HTTP).
- –ï—Å—Ç—å API-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Flask –∏–ª–∏ Node.js —Å–µ—Ä–≤–µ—Ä) ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
- –ï—Å—Ç—å –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL, MongoDB) ‚Äî —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ.
- –ï—Å—Ç—å —Å–ª—É–∂–±—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á ‚Äî –æ—á–µ—Ä–µ–¥–∏, –≤–æ—Ä–∫–µ—Ä—ã.

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ —É—Ä–æ–≤–Ω—é –¥–æ—Å—Ç—É–ø–∞:
-  Nginx (API Gateway) –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –Ω–∞—Ä—É–∂—É ‚Äî –µ–≥–æ –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ—Ç—å, –¥–æ—Å—Ç—É–ø–Ω—É—é —Å–Ω–∞—Ä—É–∂–∏ (frontend_network).
- API-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —É–º–µ—Ç—å –æ–±—â–∞—Ç—å—Å—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö ‚Äî –µ–≥–æ –≤–∫–ª—é—á–∞—é—Ç –≤ —Å–µ—Ç—å –±—ç–∫–µ–Ω–¥–∞ (backend_network).
- –ë–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤–æ–≤—Å–µ –Ω–µ –Ω—É–∂–Ω–æ –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—â–∞—Ç—å—Å—è —Å–Ω–∞—Ä—É–∂–∏.
- –í —Ç–æ –∂–µ –≤—Ä–µ–º—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä API-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –¥–æ–ª–∂–Ω—ã:
  - –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–∏–º–µ–µ—Ç—Å—è –≤ –≤–∏–¥—É Nginx –∏–ª–∏ API Gateway –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –±—Ä–∞—É–∑–µ—Ä!),
  - –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
  - –ü–æ—ç—Ç–æ–º—É –∏—Ö –ø–æ–¥–∫–ª—é—á–∞—é—Ç –∫ –æ–±–µ–∏–º —Å–µ—Ç—è–º.
---

## üéØ –¶–µ–ª—å

–†–∞–∑–¥–µ–ª–∏—Ç—å —Ä–∞–∑–Ω—ã–µ –≥—Ä—É–ø–ø—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±–µ–∫–µ–Ω–¥) –Ω–∞ **–æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏** –¥–ª—è:
- –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏,
- —É–ø—Ä–æ—â–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏,
- –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è,
- –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–±–æ–µ–≤ (—á—Ç–æ–±—ã –æ—à–∏–±–∫–∞ –≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–µ –≤–ª–∏—è–ª–∞ –Ω–∞ –¥—Ä—É–≥–∏–µ).

---

## üß† –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

–ü–æ—á–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ overlay-—Å–µ—Ç–µ–π**:
- **–ò–∑–æ–ª—è—Ü–∏—è**: —Å–µ—Ä–≤–∏—Å—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–µ –∏–º–µ—é—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ —Å–µ—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –æ—Ç–¥–µ–ª—å–Ω–∞—è.
- **–£–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å**: –ª–µ–≥—á–µ –æ–ø–∏—Å—ã–≤–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–∏—Å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–ª–∏—Ç–∏–∫ –∏–ª–∏ firewall).
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ broadcast-—Ç—Ä–∞—Ñ–∏–∫–∞ –≤ —Å–µ—Ç–µ–≤—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–∞—Ö.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –µ—Å–ª–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä—É–µ—Ç –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å, –µ–º—É –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–µ–µ –≤—ã–π—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –µ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞.

**–í–æ–∑–º–æ–∂–Ω—ã –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **–æ–¥–Ω–æ–π –æ–±—â–µ–π overlay-—Å–µ—Ç–∏** –∏ —è–≤–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–æ–≤ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é iptables –∏–ª–∏ –≤–Ω–µ—à–Ω–µ–≥–æ –ø—Ä–æ–∫—Å–∏).
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **service mesh** —Ä–µ—à–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, Istio) –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–∞—Ñ–∏–∫–æ–º –∏ –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **Docker network policies** (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è), —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–æ–º –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–¥–Ω–æ–π overlay-—Å–µ—Ç–∏.

–ù–æ **—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ overlay-—Å–µ—Ç—è–º** ‚Äî —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ü–û.

---

## üìö –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. –í –∫–ª–∞—Å—Ç–µ—Ä–µ Docker Swarm —Å–æ–∑–¥–∞—é—Ç—Å—è **–¥–≤–µ overlay-—Å–µ—Ç–∏**:
   - `frontend_network`
   - `backend_network`

2. –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è —Å–µ—Ä–≤–∏—Å—ã:
   - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã, –æ—Ç–≤–µ—á–∞—é—â–∏–µ –∑–∞ –æ—Ç–¥–∞—á—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—ã, API-—à–ª—é–∑—ã), –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –∫ `frontend_network`.
   - –í—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ API, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ** –∫ `backend_network`.

3. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–µ—Ä–≤–∏—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, API-—à–ª—é–∑) –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∫ –æ–±–µ–∏–º —Å–µ—Ç—è–º:
   - –ö `frontend_network` –¥–ª—è –ø—Ä–∏—ë–º–∞ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
   - –ö `backend_network` –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

4. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∫ —Å–µ—Ä–≤–∏—Å—É –≤ `frontend_network`.
   - –≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é `backend_network`.
   - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫ `backend_network` –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.

5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç—è–º–∏:
   - –ö–∞–∂–¥–∞—è —Å–µ—Ç—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ —Å –Ω—É–∂–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º —Ç—Ä–∞—Ñ–∏–∫–∞).
   - –°–µ—Ä–≤–∏—Å—ã —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—é—Ç, –∫ –∫–∞–∫–∏–º —Å–µ—Ç—è–º –æ–Ω–∏ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è.

## ü§î –ü–æ—á–µ–º—É –Ω–µ –æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å—ë –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏?

–ú–æ–∂–Ω–æ, –Ω–æ:
- –ù–µ –±—É–¥–µ—Ç —á—ë—Ç–∫–æ–π –∏–∑–æ–ª—è—Ü–∏–∏: –ª—é–±–æ–π —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é.
- –ü–æ–≤—ã—à–∞–µ—Ç—Å—è —Ä–∏—Å–∫ –≤–∑–ª–æ–º–∞ —á–µ—Ä–µ–∑ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
- –¢—Ä—É–¥–Ω–µ–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º.
- –ù–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ –±—É–¥—É—â–µ–º –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ç—è–º–∏.

## –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç          | –°–µ—Ç–∏                           | –¢–∏–ø –¥–æ—Å—Ç—É–ø–∞      | –ü—Ä–∏—á–∏–Ω–∞                                                           |
|:-------------------|:-------------------------------|:-----------------|:------------------------------------------------------------------|
| Nginx / API Gateway | frontend_network               | üåê –í–Ω–µ—à–Ω–∏–π         | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã                                          |
| API-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ      | frontend_network + backend_network | üåêüîí –í–Ω–µ—à–Ω–∏–π –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π | –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç Nginx –∏ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö              |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö         | backend_network                | üîí –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π      | –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –Ω–∏–∫–∞–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Å–Ω–∞—Ä—É–∂–∏   |

