## üîê 1. –¢–∏–ø—ã —Å–µ—Ç–µ–π –≤ Docker –∏ –∏—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

Docker –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ —Å–µ—Ç–µ–π, –∏ –∫–∞–∂–¥—ã–π –∏–º–µ–µ—Ç —Å–≤–æ–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

| –¢–∏–ø —Å–µ—Ç–∏ | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                                                              |
|----------|--------------------------------------------------------------------------|-----------------------------------------------------------------------------------------|
| `bridge` | –°–æ–∑–¥–∞—ë—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤                    | –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞, –Ω–æ –º–æ–≥—É—Ç ¬´–≤–∏–¥–µ—Ç—å¬ª –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–∞ —ç—Ç–æ–π —Å–µ—Ç–∏            |
| `host`   | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫ —Ö–æ—Å—Ç–∞                                 | –ù–∏–∫–∞–∫–æ–π –∏–∑–æ–ª—è—Ü–∏–∏ ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å —É—è–∑–≤–∏–º –∫ –∞—Ç–∞–∫–∞–º                                          |
| `none`   | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è                                       | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è                                                                  |
| `overlay`| –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Swarm –¥–ª—è –º–µ–∂-—Ö–æ—Å—Ç–æ–≤–æ–π —Å–≤—è–∑–∏                             | –ó–∞—â–∏—â–µ–Ω–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)                                                   |
| `macvlan`| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π MAC/IP, –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤ —Å–µ—Ç–∏  | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏ —Å —Ö–æ—Å—Ç–æ–º, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ                                |


## üõ° 2. –ò–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ –æ–¥–Ω–æ–π bridge-—Å–µ—Ç–∏ –º–æ–≥—É—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å.
- –ß—Ç–æ–±—ã –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø, –º–æ–∂–Ω–æ:
  - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é bridge-—Å–µ—Ç—å: `docker network create my-net`
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--internal`, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Å–µ—Ç—å –±–µ–∑ –≤—ã—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç: 
    - `docker network create --internal isolated-net`

## üîí 3. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Ä—Ç–∞–º

- –ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ –ª–∏—à–Ω–∏–µ –ø–æ—Ä—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `-p` –∏–ª–∏ `--publish` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
–ù–µ —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å:
```
docker run -p 80:80 nginx  # –æ—Ç–∫—Ä—ã—Ç–æ –¥–ª—è –≤—Å–µ—Ö
```

–ì–æ—Ä–∞–∑–¥–æ –ª—É—á—à–µ:
```
docker run -p 127.0.0.1:8080:80 nginx  # –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å localhost
```
## üìú 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ firewall

–ù–∞ Linux –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø —Å –ø–æ–º–æ—â—å—é `iptables` –∏–ª–∏ `ufw`.

–ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª–∞ `iptables`:
```
iptables -A INPUT -p tcp --dport 80 -s 192.168.1.0/24 -j ACCEPT
```

## üß± 5. –ù–µ –¥–∞–≤–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —è–¥—Ä–∞ Linux.   
–ß—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —Å–Ω–∏–∑–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–≥—Ä–æ–∑—ã.  
–û–¥–Ω–∞–∫–æ Docker –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, —á—Ç–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω–æ.

üö´ `--privileged`: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø

–§–ª–∞–≥ `--privileged`:
- –î–∞—ë—Ç –ø–æ—á—Ç–∏ –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∫–æ –≤—Å–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º —è–¥—Ä–∞ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º —Ö–æ—Å—Ç–∞.
- –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:
  - –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º,
  - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥—É–ª—è–º–∏ —è–¥—Ä–∞,
  - –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ /dev (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞),
  - —Ä–∞–±–æ—Ç—É —Å —Å–µ—Ç–µ–≤—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ —Ö–æ—Å—Ç–∞ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

–ü—Ä–æ–±–ª–µ–º–∞: –µ—Å–ª–∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç –¥–æ—Å—Ç—É–ø –∫ —Ç–∞–∫–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É, –æ–Ω —Å–º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –≤—ã–π—Ç–∏ –∏–∑ –∏–∑–æ–ª—è—Ü–∏–∏ –∏ –ø–æ–≤—Ä–µ–¥–∏—Ç—å –≤—Å—é —Å–∏—Å—Ç–µ–º—É.

‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –æ—Ç–ª–∞–¥–∫–∏, —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏–ª–∏ CI-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ.

üõ° `--cap-drop=ALL` –∏ `--cap-add=...`: —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

–í—ã –º–æ–∂–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, —É–±–∏—Ä–∞—è –≤—Å—ë –ª–∏—à–Ω–µ–µ –∏ —Ä–∞–∑—Ä–µ—à–∞—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ:
```
docker run --cap-drop=ALL --cap-add=NET_BIND_SERVICE my-image
```
–≥–¥–µ
  - `--cap-drop=ALL`: —É–±–∏—Ä–∞–µ—Ç –≤—Å–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏.

  - `--cap-add=NET_BIND_SERVICE`: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –ø–æ—Ä—Ç—ã –Ω–∏–∂–µ 1024 (–Ω–∞–ø—Ä–∏–º–µ—Ä, 80, 443).


## üîê 6. Secrets –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- –ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Secrets (—Ç–æ–ª—å–∫–æ –¥–ª—è Swarm) –∏–ª–∏ —Ç–æ–º–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –¥–æ—Å—Ç—É–ø–∞.

## üß™ 7. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ–±—Ä–∞–∑—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã 
- –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ —Å–≤–æ–∏ —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±—Ä–∞–∑–∞ Docker –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ `docker scan`:
    ```
    docker scan my-image
    ```
- –£–¥–∞–ª—è–π—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑ –æ–±—Ä–∞–∑–∞.

## ‚úÖ –û–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Docker

| –ß—Ç–æ –¥–µ–ª–∞—Ç—å                                   | –ó–∞—á–µ–º                                               |
|---------------------------------------------|-----------------------------------------------------|
| –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã                | –°–Ω–∏–∂–µ–Ω–∏–µ –∞—Ç–∞–∫—É–µ–º–æ–π –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏                      |
| –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ç–∏                | –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤                                   |
| –ü—Ä–∏–º–µ–Ω—è–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ firewall                 | –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∫ —Ö–æ—Å—Ç—É –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º              |
| –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–±—Ä–∞–∑—ã               | –£–º–µ–Ω—å—à–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π                              |
| –ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å root-–¥–æ—Å—Ç—É–ø–æ–º    | –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞         |
| –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –æ–±—Ä–∞–∑—ã                 | –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø–∞—Ç—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏                       |
