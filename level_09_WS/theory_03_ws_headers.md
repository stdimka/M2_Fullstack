## 1. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ HTTP

    –≠—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã –∏ –¥–ª—è HTTP, –∏ –¥–ª—è WS.
    –û–Ω–∏ —Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ –≤ –æ–±—ã—á–Ω—ã—Ö HTTP-–∑–∞–ø—Ä–æ—Å–∞—Ö, —Ç–∞–∫ –∏ –≤ WebSocket-–∑–∞–ø—Ä–æ—Å–∞—Ö, –ø–æ—Ç–æ–º—É —á—Ç–æ WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π HTTP-–∑–∞–ø—Ä–æ—Å.
    –û–¥–Ω–∞–∫–æ, 

GET / HTTP/1.1
Host: echo.websocket.org
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:136.0) Gecko/20100101 Firefox/136.0
Accept: */*
Accept-Language: en-US,ru;q=0.7,bg;q=0.3
Accept-Encoding: gzip, deflate, br, zstd

üîπ GET / HTTP/1.1 ‚Äì –∑–∞–ø—Ä–æ—Å –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (WebSocket –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GET, –∞ –Ω–µ POST –∏–ª–∏ PUT).
üîπ Host: echo.websocket.org ‚Äì –¥–æ–º–µ–Ω, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç.
üîπ User-Agent ‚Äì –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±—Ä–∞—É–∑–µ—Ä–µ.
üîπ Accept: / ‚Äì –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö (–æ–±—ã—á–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è WebSocket-—Å–µ—Ä–≤–µ—Ä–∞–º–∏).
üîπ Accept-Language: en-US,ru;q=0.7,bg;q=0.3 ‚Äì –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ —è–∑—ã–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞.
üîπ Accept-Encoding: gzip, deflate, br, zstd ‚Äì –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ—Ç–æ–¥—ã —Å–∂–∞—Ç–∏—è.

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–±—ã—á–Ω—ã–π HTTP GET-–∑–∞–ø—Ä–æ—Å, –Ω–æ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ Upgrade: websocket –∏ Connection: Upgrade.
- –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebSocket, –æ–Ω –æ—Ç–≤–µ—á–∞–µ—Ç 101 Switching Protocols, –∏ —Å —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º (full-duplex) WebSocket-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º.
- –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è ‚Äî –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –∏–¥—ë—Ç –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ WebSocket.

## 2. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ WebSocket

Sec-WebSocket-Version: 13
Origin: http://localhost:63342
Sec-WebSocket-Extensions: permessage-deflate
Sec-WebSocket-Key: ZmBnYW8K7XX7hfrwSYToEg==
Connection: keep-alive, Upgrade
Sec-Fetch-Dest: empty
Sec-Fetch-Mode: websocket
Sec-Fetch-Site: cross-site
Pragma: no-cache
Cache-Control: no-cache
Upgrade: websocket

üîπ Sec-WebSocket-Version: 13

    –£–∫–∞–∑—ã–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é WebSocket-–ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (–≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Å–∏—é 13).

üîπ Origin: http://localhost:63342

    –°–æ–æ–±—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É, –æ—Ç–∫—É–¥–∞ –∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å (–≤–∞–∂–Ω–æ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –º–µ–∂—Å–∞–π—Ç–æ–≤—ã—Ö –∞—Ç–∞–∫).
    –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —ç—Ç–æ—Ç Origin, –æ–Ω –º–æ–∂–µ—Ç –æ—Ç–∫–∞–∑–∞—Ç—å –≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏.

üîπ Sec-WebSocket-Extensions: permessage-deflate

    –ö–ª–∏–µ–Ω—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä—É —Å–∂–∞—Ç–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞.
    –°–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –ª–∏–±–æ –ø—Ä–∏–Ω—è—Ç—å —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫, –ª–∏–±–æ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å –µ–≥–æ.

üîπ Sec-WebSocket-Key: ZmBnYW8K7XX7hfrwSYToEg==

    –°–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –æ–±—ã—á–Ω—ã—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.
    –°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º Sec-WebSocket-Accept, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ö–µ—à–µ–º —ç—Ç–æ–π —Å—Ç—Ä–æ–∫–∏.

üîπ Connection: keep-alive, Upgrade

    Upgrade —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è —Å HTTP –Ω–∞ WebSocket.
    –ë–µ–∑ —ç—Ç–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ–π–º—ë—Ç, —á—Ç–æ –∑–∞–ø—Ä–æ—Å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ WebSocket.

üîπ Upgrade: websocket

    –≠—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä—è–º–æ –≥–æ–≤–æ—Ä–∏—Ç —Å–µ—Ä–≤–µ—Ä—É: "–Ø —Ö–æ—á—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebSocket –≤–º–µ—Å—Ç–æ HTTP".
    –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç WebSocket, –æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç 101 Switching Protocols.

üîπ Sec-Fetch-Dest: empty / Sec-Fetch-Mode: websocket / Sec-Fetch-Site: cross-site

    –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫ —Ç–∏–ø–∞ CSRF –∏ –¥—Ä—É–≥–∏—Ö –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –º–µ–∂—Å–∞–π—Ç–æ–≤—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π.

üîπ Pragma: no-cache / Cache-Control: no-cache

    –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –Ω–µ —Ö–æ—á–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å.

### –ö–∞–∫ —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å, –µ—Å–ª–∏ WebSocket-–∑–∞–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç?

HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: qW6dZJvEJr7+NsPQa5x5Q5TV2Hk=

    101 Switching Protocols ‚Äì —Å–µ—Ä–≤–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ WebSocket.
    Upgrade: websocket ‚Äì —Å–µ—Ä–≤–µ—Ä –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ.
    Connection: Upgrade ‚Äì –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫.
    Sec-WebSocket-Accept ‚Äì —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ö–µ—à –∑–∞–≥–æ–ª–æ–≤–∫–∞ Sec-WebSocket-Key.

### –ß—Ç–æ –∑–¥–µ—Å—å –≤–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å?

- WebSocket-–∑–∞–ø—Ä–æ—Å ‚Äî —ç—Ç–æ –æ–±—ã—á–Ω—ã–π HTTP GET-–∑–∞–ø—Ä–æ—Å —Å Upgrade: websocket.
- –ë–µ–∑ Sec-WebSocket-Key —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ä–≥–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.
- –ë–µ–∑ Upgrade: websocket —Å–µ—Ä–≤–µ—Ä –¥–∞–∂–µ –Ω–µ –ø–æ–π–º—ë—Ç, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç —Ö–æ—á–µ—Ç WebSocket.
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ Origin –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å WebSocket, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∂—ë—Å—Ç–∫–æ.
- –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω—è–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç 101 Switching Protocols.