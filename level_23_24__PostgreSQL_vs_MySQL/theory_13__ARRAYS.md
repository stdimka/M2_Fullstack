# –ú–∞—Å—Å–∏–≤—ã –≤ PostgreSQL

–í PostgreSQL –º–∞—Å—Å–∏–≤—ã ‚Äî —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤ –æ–¥–Ω–æ–π —è—á–µ–π–∫–µ —Ç–∞–±–ª–∏—Ü—ã**. 
- PostgreSQL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ 6 –∏–∑–º–µ—Ä–µ–Ω–∏–π –≤ –º–∞—Å—Å–∏–≤–∞—Ö.
- –≠–ª–µ–º–µ–Ω—Ç—ã –≤ –º–∞—Å—Å–∏–≤–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞.

---

### üîπ –û–±—ä—è–≤–ª–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞

```
-- –û–¥–Ω–æ–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª
my_column INTEGER[];

-- –î–≤—É–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å—Ç—Ä–æ–∫
my_column TEXT[][];

-- –ú–∞—Å—Å–∏–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã
my_column INTEGER[3];
```

---

### üîπ –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å –º–∞—Å—Å–∏–≤–æ–º

```sql
CREATE TABLE example (
    id SERIAL PRIMARY KEY,
    name TEXT,
    tags TEXT[]  -- –º–∞—Å—Å–∏–≤ —Ç–µ–≥–æ–≤
);
```

---

### üîπ –í—Å—Ç–∞–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –º–∞—Å—Å–∏–≤

```sql
INSERT INTO example (name, tags)
VALUES ('Laptop', ARRAY['electronics', 'computer', 'tech']);
```

–ò–ª–∏:

```sql
INSERT INTO example (name, tags)
VALUES ('Phone', '{mobile,tech}');
```

---

### üîπ –î–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –º–∞—Å—Å–∏–≤–∞

–ò–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ 1, –∞ –Ω–µ 0.

```sql
-- –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π —Ç–µ–≥
SELECT tags[1] FROM example;

-- –û–±–Ω–æ–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π —Ç–µ–≥
UPDATE example SET tags[2] = 'updated' WHERE name = 'Laptop';
```

---

### üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏

| –û–ø–µ—Ä–∞—Ç–æ—Ä | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                                | –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ (SQL)                      | –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞             |
|----------|-------------------------------------------------------|-----------------------------------------------|-------------------------------|
| `ANY`    | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –º–∞—Å—Å–∏–≤–µ          | SELECT 1 WHERE 'a' = ANY(ARRAY['a','b','c']); | 1 (–∑–Ω–∞—á–µ–Ω–∏–µ –µ—Å—Ç—å)            |
| `ALL`    | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è–µ—Ç –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º   | SELECT 1 WHERE 5 > ALL(ARRAY[1,2,3]);         | 1 (–≤—Å–µ < 5)                   |
| `@>`     | –ú–∞—Å—Å–∏–≤ —Å–ª–µ–≤–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ —Å–ø—Ä–∞–≤–∞                   | SELECT 1 WHERE ARRAY[1,2,3] @> ARRAY[2,3];    | 1 (–¥–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç)             |
| `<@`     | –ú–∞—Å—Å–∏–≤ —Å–ª–µ–≤–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ —Å–ø—Ä–∞–≤–∞              | SELECT 1 WHERE ARRAY[2,3] <@ ARRAY[1,2,3];    | 1 (–¥–∞, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è)           |
| `&&`     | –ú–∞—Å—Å–∏–≤—ã –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è, –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ–±—â–∏–π —ç–ª–µ–º–µ–Ω—Ç | SELECT 1 WHERE ARRAY[1,2] && ARRAY[2,3];      | 1 (–æ–±—â–∏–π —ç–ª–µ–º–µ–Ω—Ç: 2)         |
| `\|\|`   | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–∞ –º–∞—Å—Å–∏–≤–∞                                | SELECT ARRAY[1,2] \|\| ARRAY[3,4];            | {1,2,3,4} (–æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤) |


#### –°–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤

```sql
CREATE TABLE books (
    id SERIAL PRIMARY KEY,
    title TEXT,
    tags TEXT[]
);

INSERT INTO books (title, tags) VALUES
('SQL Basics',     ARRAY['sql', 'database']),
('Advanced Python',ARRAY['python', 'code']),
('Web Dev',        ARRAY['html', 'css', 'javascript']),
('Mixed',          ARRAY['sql', 'python']);
```


#### –ü—Ä–∏–º–µ—Ä: `ANY`
```sql 
SELECT title FROM books WHERE 'sql' = ANY(tags);  -- SQL Basics, Mixed
```

#### –ü—Ä–∏–º–µ—Ä: `ALL`
```sql 
SELECT 1 WHERE 10 > ALL(ARRAY[1, 5, 9]);  -- 1
-- (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true, —Ç–∞–∫ –∫–∞–∫ 10 –±–æ–ª—å—à–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞)
```

#### –ü—Ä–∏–º–µ—Ä: `@>` (—Å–æ–¥–µ—Ä–∂–∏—Ç)
(–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –º–∞—Å—Å–∏–≤ `tags` —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ 'python')
```sql 
SELECT title FROM books WHERE tags @> ARRAY['python'];  -- Advanced Python, Mixed
```
 
#### –ü—Ä–∏–º–µ—Ä: `<@` (—Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤)
(–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –∑–Ω–∞—á–µ–Ω–∏–µ 'python'—Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ `tags`)
```sql 
SELECT title FROM books WHERE ARRAY['python'] <@ tags;  -- Advanced Python, Mixed
```

#### –ü—Ä–∏–º–µ—Ä: `&&` (–ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è)
(–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ –≤ –º–∞—Å—Å–∏–≤–µ `tags` —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –º–∞—Å—Å–∏–≤–∞ {'html', 'sql'})
```sql 
SELECT title FROM books WHERE tags && ARRAY['html', 'sql']; --  SQL Basics, Web Dev, Mixed
```

#### –ü—Ä–∏–º–µ—Ä: `||` (–∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è)
–í–µ—Ä–Ω—É—Ç—å –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—é –º–∞—Å—Å–∏–≤–∞ `tags` —Å –º–∞—Å—Å–∏–≤–æ–º `{'new'}` –¥–ª—è —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ `title = 'SQL Basics'` 
```sql 
SELECT tags || ARRAY['new'] FROM books WHERE title = 'SQL Basics';  -- {sql, database, new}
```

### –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—Å—Å–∏–≤–∞–º–∏:

| –§—É–Ω–∫—Ü–∏—è                       | –û–ø–∏—Å–∞–Ω–∏–µ                    | –ü—Ä–∏–º–µ—Ä                                             | –†–µ–∑—É–ª—å—Ç–∞—Ç     |
|------------------------------|-----------------------------|-----------------------------------------------------|---------------|
| `unnest(array)`              | –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –º–∞—Å—Å–∏–≤ –≤ —Å—Ç—Ä–æ–∫–∏ | `SELECT unnest(ARRAY[1,2,3]);`                      | 1, 2, 3       |
| `array_length(array, dim)`   | –î–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞ –ø–æ –∏–∑–º–µ—Ä–µ–Ω–∏—é  | `SELECT array_length(ARRAY[1,2,3], 1);`             | 3             |
| `array_append(array, elem)`  | –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç            | `SELECT array_append(ARRAY[1,2], 3);`               | {1,2,3}       |
| `array_prepend(elem, array)` | –î–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞—á–∞–ª–æ           | `SELECT array_prepend(0, ARRAY[1,2]);`              | {0,1,2}       |
| `array_remove(array, value)` | –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç             | `SELECT array_remove(ARRAY[1,2,3], 2);`             | {1,3}         |
| `array_position(array, value)` | –ò–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–∂–¥–µ–Ω–∏—è  | `SELECT array_position(ARRAY[1,2,3], 2);`           | 2             |
| `array_to_string(array, sep)` | –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫—É       | `SELECT array_to_string(ARRAY['a','b','c'], ',');`  | 'a,b,c'       |
| `string_to_array(str, sep)`  | –°—Ç—Ä–æ–∫–∞ –≤ –º–∞—Å—Å–∏–≤             | `SELECT string_to_array('a,b,c', ',');`             | {'a','b','c'} |
