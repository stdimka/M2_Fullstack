## –û–ø–µ—Ä–∞—Ç–æ—Ä –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ GROUP BY

–í MySQL GROUP BY –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å—Ç—Ä–æ–∫ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –≤ –æ–¥–Ω–æ–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç–æ–ª–±—Ü–∞—Ö. –ß–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å –∞–≥—Ä–µ–≥–∏—Ä—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ `COUNT()`, `SUM()`, `AVG()`, `MIN()`, `MAX()`.

üìå –°–∏–Ω—Ç–∞–∫—Å–∏—Å
```
SELECT column_name, AGGREGATE_FUNCTION(column_name)
FROM table_name
GROUP BY column_name;
```

#### –ü—Ä–∏–º–µ—Ä:
*–í—ã–≤–µ—Å—Ç–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É*
```
SELECT customer_id, COUNT(*) AS total_orders
FROM orders
GROUP BY customer_id;
```

## –û–ø–µ—Ä–∞—Ç–æ—Ä —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ HAVING

`HAVING` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ **—É–∂–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö *, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é `GROUP BY`. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `WHERE`, –∫–æ—Ç–æ—Ä—ã–π —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ **–¥–æ** –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏, `HAVING` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–ø–æ—Å–ª–µ** –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏.

**–í–ù–ò–ú–ê–ù–ò–ï!**
`GROUP BY` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–µ–∑ `HAVING`, –Ω–æ `HAVING` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ `GROUP BY`!

### –ü–æ—Ä—è–¥–æ–∫ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

| –ü–æ—Ä—è–¥–æ–∫ | –û–ø–µ—Ä–∞—Ç–æ—Ä  | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| 1       | `SELECT`  | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–≤–µ–¥–µ–Ω—ã. |
| 2       | `DISTINCT`| –£–±–∏—Ä–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã (–ª–æ–≥–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ `SELECT`). |
| 3       | `FROM`    | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ. |
| 4       | `JOIN`    | –û–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–∞–±–ª–∏—Ü. |
| 5       | `WHERE`   | –§–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ **–¥–æ** –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏. |
| 6       | `GROUP BY`| –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. |
| 7       | `HAVING`  | –§–∏–ª—å—Ç—Ä—É–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ **–ø–æ—Å–ª–µ** `GROUP BY`. |
| 8       | `ORDER BY`| –°–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. |
| 9       | `LIMIT`   | –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ –≤—ã–≤–æ–¥–µ. |
| 10      | `OFFSET`  | –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º. |



#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HAVING
*–í—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–¥–µ–ª–∞–ª–∏ –±–æ–ª–µ–µ —á–µ–º 5 –∑–∞–∫–∞–∑–æ–≤*
```
SELECT 
    customer_id, COUNT(*) AS total_orders
FROM 
    orders
GROUP BY customer_id
HAVING total_orders > 5;
```

## –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å `WITH ROLLUP `

`WITH ROLLUP` ‚Äî —ç—Ç–æ –æ–ø—Ü–∏—è –≤ MySQL, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ `GROUP BY` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –∏ –∏—Ç–æ–≥–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ (–∞–≥—Ä–µ–≥–∞—Ç–æ–≤), –≤–∫–ª—é—á–∞—è –æ–±—â–∏–π –∏—Ç–æ–≥ (—Å—É–º–º—É, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ç. –ø.).

```
SELECT 
    department_id, job_id, COUNT(*) AS film_count
FROM
    employees
GROUP BY department_id , job_id WITH ROLLUP;
```